## How to contribute to Calibre-Web

First of all, we would like to thank you for reading this text. We are happy you are willing to contribute to Calibre-Web.

### **General**

**Communication language** is English. Google translated texts are not as bad as you might think, they are usually understandable, so don't worry if you generate your post that way.

**Calibre-Web** is not **Calibre**. If you are having a question regarding Calibre please post this at their [repository](https://github.com/kovidgoyal/calibre).

**Docker-Containers** of Calibre-Web are maintained by different persons than the people who drive Calibre-Web. If we come to the conclusion during our analysis that the problem is related to Docker, we might ask you to open a new issue at the repository of the Docker Container.

If you are having **Basic Installation Problems** with python or its dependencies, please consider using your favorite search engine to find a solution. In case you can't find a solution, we are happy to help you.

We can offer only very limited support regarding configuration of **Reverse-Proxy Installations**, **OPDS-Reader** or other programs in combination with Calibre-Web.

### **Translation**

Some of the user languages in Calibre-Web having missing translations. We are happy to add the missing texts if you translate them. Create a Pull Request, create an issue with the .po file attached, or write an email to "ozzie.fernandez.isaacs@googlemail.com" with attached translation file. To display all book languages in your native language an additional file is used (iso_language_names.py). The content of this file is auto-generated with the corresponding translations of Calibre, please do not edit this file on your own.

### **Documentation**

The Calibre-Web documentation is hosted in the GitHub [Wiki](https://github.com/janeczku/calibre-web/wiki). The Wiki is open to everybody, if you find a problem, feel free to correct it. If information is missing, you are welcome to add it. The content will be reviewed time by time. Please try to be consistent with the form with the other Wiki pages (e.g. the project name is Calibre-Web with 2 capital letters and a dash in between).

### **Reporting a bug**

Do not open up a GitHub issue if the bug is a **security vulnerability** in Calibre-Web. Instead, please write an email to "ozzie.fernandez.isaacs@googlemail.com".

Ensure the **bug was not already reported** by searching on GitHub under [Issues](https://github.com/janeczku/calibre-web/issues). Please also check if a solution for your problem can be found in the [wiki](https://github.com/janeczku/calibre-web/wiki).

If you're unable to find an **open issue** addressing the problem, open a [new one](https://github.com/janeczku/calibre-web/issues/new/choose). Be sure to include a **title** and **clear description**, as much relevant information as possible, the **issue form** helps you provide the right information. Deleting the form and just pasting the stack trace doesn't speed up fixing the problem. If your issue could be resolved, consider closing the issue.

### **Feature Request**

If there is a feature missing in Calibre-Web and you can't find a feature request in the [Issues](https://github.com/janeczku/calibre-web/issues) section, you could create a [feature request](https://github.com/janeczku/calibre-web/issues/new?assignees=&labels=&template=feature_request.md&title=).
We will not extend Calibre-Web with any more login abilities or add further files storages, or file syncing ability. Calibre-Web is made for home usage for company in-house usage, so requests regarding any sorts of social interaction capability, payment routines, search engine or website analytics integration will not be implemented.

### **Contributing code to Calibre-Web**

Open a new GitHub pull request with the patch. Ensure the PR description clearly describes the problem and solution. Include the relevant issue number if applicable.

In case your code enhances features of Calibre-Web: Create your pull request for the development branch if your enhancement consists of more than some lines of code in a local section of Calibre-Webs code. This makes it easier to test it and check all implication before it's made public.

Please check if your code runs with python 3, python 2 is no longer supported. If possible and the feature is related to operating system functions, try to check it on Windows and Linux.
Calibre-Web is automatically tested on Linux in combination with python 3.8. The code for testing is in a [separate repo](https://github.com/OzzieIsaacs/calibre-web-test) on GitHub. It uses unit tests and performs real system tests with selenium; it would be great if you could consider also writing some tests.
A static code analysis is done by Codacy, but it's partly broken and doesn't run automatically. You could check your code with ESLint before contributing, a configuration file can be found in the projects root folder.


### Developer Workflow

This project uses the uv toolchain for dependency management, locking, and fast execution. Please install uv and use the commands below for a smooth developer experience.

#### Prerequisites

- Install uv: follow the official instructions at `https://docs.astral.sh/uv/getting-started/`.
- Python 3.8+ is supported; target 3.8 when compiling requirement snapshots.

#### First-time setup

```bash
uv sync
```

This resolves and installs all dependencies into a local virtual environment (`.venv`) and builds the project in editable mode.

#### Running the app

```bash
uv run cps
```

Helpful env/flags:
- Show logs to stdout: `FLASK_DEBUG=1 uv run cps` or `uv run cps -o /dev/stdout`
- Change port/IP: `CALIBRE_PORT=9090 uv run cps`, `uv run cps -i 0.0.0.0`

#### Optional features (extras)

To install extras for a given feature set:

```bash
uv sync --extra metadata --extra comics --extra gmail --extra gdrive --extra kobo --extra ldap --extra oauth --extra goodreads
```

Install only what you need by selecting the extras.

#### Linting and formatting

Use ruff via uv:

```bash
uv run ruff check --fix
uv run ruff format
```

**Note:** Run ruff only on files you changed. Running without file paths will scan and rewrite the entire legacy codebase, which is usually not intended.

Examples:

```bash
uv run ruff check --fix cps/helper.py cps/admin.py
uv run ruff format cps/helper.py cps/admin.py
```

Pre-commit runs ruff only on staged files automatically.

Pre-commit hooks run ruff and keep requirement snapshots in sync. Enable locally with:

```bash
uv run pre-commit install

# Manually run pre-commit hooks
uv run pre-commit run
```

#### Dependency snapshots (pip-compile via uv-pre-commit)

The repository includes pre-commit hooks that generate requirement snapshots per optional extra and for the `dev` group. These hooks only trigger when `pyproject.toml` or `uv.lock` change and target Python 3.8 for broad compatibility.

If needed, you can regenerate a specific snapshot manually, e.g.:

```bash
uvx uv pip compile pyproject.toml -o requirements-dev.txt --group dev --generate-hashes --universal --python-version=3.8
```

#### Troubleshooting

- Editable build fails with multiple top-level packages: ensure you are on the latest `pyproject.toml` with explicit discovery and package mapping.
- Resolver errors about Python 3.7: ensure you use Python 3.8+ (current dependencies no longer support 3.7).
- Image processing warnings: install system deps (macOS): `brew install freetype imagemagick`.
